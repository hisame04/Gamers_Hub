<div class="nested-form-wrapper game-input-group" 
     data-new-record="<%= f.object.new_record? %>"
     data-controller="game-dependency"
     data-game-dependency-modes-value='<%= GameMode.all.to_json %>'
     data-game-dependency-roles-value='<%= GameRole.all.to_json %>'>
  
  <div class="gh-game-edit-card">
    
    <div class="gh-game-edit-header">
      <%#ã‚²ãƒ¼ãƒ ã‚¿ã‚¤ãƒˆãƒ«ã®å…¥åŠ›%>
      <%= f.label :game_title_id, "ã‚²ãƒ¼ãƒ ã‚¿ã‚¤ãƒˆãƒ«", class: "header-label" %>
      <%= f.collection_select :game_title_id, GameTitle.all, :id, :name, 
          { prompt: "é¸æŠã—ã¦ãã ã•ã„" },
          { 
            class: "gh-select-title", 
            data: { target: "game-dependency.gameSelect", action: "change->game-dependency#updateOptions" } 
          } 
      %>
    </div>

    <div class="gh-game-edit-body">
      <%#ãƒ—ãƒ¬ã‚¤ã‚¹ã‚¿ã‚¤ãƒ«ã®å…¥åŠ›%>
      <div class="gh-input-label">
        <span class="gh-icon-s">ğŸ”¥</span> <label class="fw-bold">ãƒ—ãƒ¬ã‚¤ã‚¹ã‚¿ã‚¤ãƒ«</label>
      </div>
      <div class="mb-2">
        <%= f.select :play_style, 
            UserGameRelation::PLAY_STYLES.map { |s| [s[:name], s[:id]] }, 
            { include_blank: "é¸æŠã—ã¦ãã ã•ã„" }, 
            { 
              class: "gh-select-item", 
              style: "width: 100%; box-sizing: border-box;" 
            } 
        %>
      </div>
      
      <div class="gh-input-section">
        <%#ãƒ¢ãƒ¼ãƒ‰ã®å…¥åŠ›%>
        <div class="gh-input-label">
          <span class="gh-icon-s">ğŸ®</span> <label class="fw-bold">ã‚ˆãéŠã¶ãƒ¢ãƒ¼ãƒ‰ (æœ€å¤§3ã¤)</label>
        </div>
        <% [:game_mode_id, :game_mode_2_id].each_with_index do |column, i| %>
          <div class="mb-2">
            <%= f.select column, [], { prompt: "#{i+1}. å…ˆã«ã‚²ãƒ¼ãƒ ã‚’é¸æŠ" },
                { 
                  class: "gh-select-item",
                  data: { 
                    target: "game-dependency.modeSelect",
                    selected_value: f.object.public_send(column),
                    index: i + 1
                  }
                } 
            %>
          </div>
        <% end %>
      </div>

      <div class="gh-input-section">
        <%#ãƒ­ãƒ¼ãƒ«ãƒ»ã‚­ãƒ£ãƒ©ã®å…¥åŠ›%>
        <div class="gh-input-label">
           <span class="gh-icon-s">ğŸ‘¤</span> <label class="fw-bold">ã‚ˆãä½¿ã†ã‚­ãƒ£ãƒ© (æœ€å¤§3ã¤)</label>
        </div>
        <% [:game_role_id, :game_role_2_id, :game_role_3_id].each_with_index do |column, i| %>
          <div class="mb-2">
            <%= f.select column, [], { prompt: "#{i+1}. å…ˆã«ã‚²ãƒ¼ãƒ ã‚’é¸æŠ" },
                { 
                  class: "gh-select-item",
                  data: { 
                    target: "game-dependency.roleSelect", 
                    selected_value: f.object.public_send(column),
                    index: i + 1
                  }
                } 
            %>
          </div>
        <% end %>
      </div>

      <div class="gh-card-footer-action">
        <%= f.hidden_field :_destroy %>
        <%#ã‚ˆãéŠã¶ã‚²ãƒ¼ãƒ ã®å‰Šé™¤ãƒœã‚¿ãƒ³%>
        <button type="button" class="gh-delete-btn" data-action="click->nested-form#remove">
          å‰Šé™¤
        </button>
      </div>

    </div>
  </div>
</div>